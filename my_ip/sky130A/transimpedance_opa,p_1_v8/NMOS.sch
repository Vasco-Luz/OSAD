v {xschem version=3.4.5 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
T {BAsic ac gain} 470 -60 0 0 0.4 0.4 {}
T {The phase margin is bad in ngspice } 620 360 0 0 0.4 0.4 {}
T {Basic Opamp} -90 -90 0 0 0.4 0.4 {}
N -340 200 -340 220 {
lab=GND}
N -340 100 -340 140 {
lab=VDD}
N 420 260 420 330 {
lab=#net1}
N 420 330 420 350 {
lab=#net1}
N 50 380 160 380 {
lab=#net2}
N 10 300 10 350 {
lab=#net2}
N 90 330 90 380 {
lab=#net2}
N 10 410 10 440 {
lab=GND}
N 420 410 420 440 {
lab=GND}
N 10 200 10 300 {
lab=#net2}
N 10 110 10 140 {
lab=VDD}
N 10 380 10 410 {
lab=GND}
N 420 380 420 410 {
lab=GND}
N 10 330 90 330 {
lab=#net2}
N 340 250 500 250 {
lab=#net1}
N 420 250 420 260 {
lab=#net1}
N 340 220 420 220 {
lab=GND}
N 420 220 500 220 {
lab=GND}
N 160 380 380 380 {
lab=#net2}
N 340 120 340 190 {
lab=#net3}
N 380 90 460 90 {
lab=#net3}
N 500 120 500 190 {
lab=VOUT}
N 420 90 420 140 {
lab=#net3}
N 340 140 420 140 {
lab=#net3}
N 340 60 340 90 {
lab=VDD}
N 500 60 500 90 {
lab=VDD}
N 340 40 340 60 {
lab=VDD}
N 340 40 500 40 {
lab=VDD}
N 500 40 500 60 {
lab=VDD}
N 500 150 610 150 {
lab=VOUT}
N 680 210 680 240 {
lab=GND}
N 240 220 300 220 {
lab=VIN+}
N 540 220 600 220 {
lab=VIN-}
N 610 150 680 150 {
lab=VOUT}
N -280 600 -280 620 {
lab=GND}
N -280 500 -280 540 {
lab=#net4}
N -280 620 -280 640 {
lab=GND}
N -280 410 -280 440 {
lab=VIN+}
N -470 500 -280 500 {
lab=#net4}
N -470 410 -470 440 {
lab=VIN-}
N 410 900 410 970 {
lab=#net5}
N 410 970 410 990 {
lab=#net5}
N 40 1020 150 1020 {
lab=#net6}
N 0 940 0 990 {
lab=#net6}
N 80 970 80 1020 {
lab=#net6}
N 0 1050 0 1080 {
lab=GND}
N 410 1050 410 1080 {
lab=GND}
N 0 840 0 940 {
lab=#net6}
N 0 750 0 780 {
lab=VDD}
N 0 1020 0 1050 {
lab=GND}
N 410 1020 410 1050 {
lab=GND}
N 0 970 80 970 {
lab=#net6}
N 330 890 490 890 {
lab=#net5}
N 410 890 410 900 {
lab=#net5}
N 330 860 410 860 {
lab=GND}
N 410 860 490 860 {
lab=GND}
N 150 1020 370 1020 {
lab=#net6}
N 330 760 330 830 {
lab=#net7}
N 370 730 450 730 {
lab=#net7}
N 490 760 490 830 {
lab=VOUTC}
N 410 730 410 780 {
lab=#net7}
N 330 780 410 780 {
lab=#net7}
N 330 700 330 730 {
lab=VDD}
N 490 700 490 730 {
lab=VDD}
N 330 680 330 700 {
lab=VDD}
N 330 680 490 680 {
lab=VDD}
N 490 680 490 700 {
lab=VDD}
N 490 790 600 790 {
lab=VOUTC}
N 670 850 670 880 {
lab=GND}
N 230 860 290 860 {
lab=VINC}
N 530 860 590 860 {
lab=VINC}
N 600 790 670 790 {
lab=VOUTC}
N -440 890 -440 910 {
lab=GND}
N -440 910 -440 930 {
lab=GND}
N -440 790 -440 830 {
lab=#net8}
N -440 690 -440 720 {
lab=VINC}
N -440 720 -440 730 {
lab=VINC}
N 420 1600 420 1670 {
lab=#net9}
N 420 1670 420 1690 {
lab=#net9}
N 50 1720 160 1720 {
lab=#net10}
N 10 1640 10 1690 {
lab=#net10}
N 90 1670 90 1720 {
lab=#net10}
N 10 1750 10 1780 {
lab=GND}
N 420 1750 420 1780 {
lab=GND}
N 10 1540 10 1640 {
lab=#net10}
N 10 1450 10 1480 {
lab=VDD}
N 10 1720 10 1750 {
lab=GND}
N 420 1720 420 1750 {
lab=GND}
N 10 1670 90 1670 {
lab=#net10}
N 340 1590 500 1590 {
lab=#net9}
N 420 1590 420 1600 {
lab=#net9}
N 340 1560 420 1560 {
lab=GND}
N 420 1560 500 1560 {
lab=GND}
N 160 1720 380 1720 {
lab=#net10}
N 340 1460 340 1530 {
lab=#net11}
N 380 1430 460 1430 {
lab=#net11}
N 500 1460 500 1530 {
lab=VOUTa+}
N 420 1430 420 1480 {
lab=#net11}
N 340 1480 420 1480 {
lab=#net11}
N 340 1400 340 1430 {
lab=#net12}
N 500 1400 500 1430 {
lab=#net12}
N 340 1380 340 1400 {
lab=#net12}
N 340 1380 500 1380 {
lab=#net12}
N 500 1380 500 1400 {
lab=#net12}
N 500 1490 610 1490 {
lab=VOUTa+}
N 680 1550 680 1580 {
lab=GND}
N 240 1560 300 1560 {
lab=VIN}
N 540 1560 600 1560 {
lab=VIN}
N 610 1490 680 1490 {
lab=VOUTa+}
N -240 1590 -240 1610 {
lab=GND}
N -240 1610 -240 1630 {
lab=GND}
N -240 1490 -240 1530 {
lab=VIN}
N 430 2250 430 2320 {
lab=#net13}
N 430 2320 430 2340 {
lab=#net13}
N 60 2370 170 2370 {
lab=#net14}
N 20 2290 20 2340 {
lab=#net14}
N 100 2320 100 2370 {
lab=#net14}
N 20 2400 20 2430 {
lab=GND}
N 430 2400 430 2430 {
lab=#net15}
N 20 2190 20 2290 {
lab=#net14}
N 20 2100 20 2130 {
lab=VDD}
N 20 2370 20 2400 {
lab=GND}
N 430 2370 430 2400 {
lab=#net15}
N 20 2320 100 2320 {
lab=#net14}
N 350 2240 510 2240 {
lab=#net13}
N 430 2240 430 2250 {
lab=#net13}
N 350 2210 430 2210 {
lab=GND}
N 430 2210 510 2210 {
lab=GND}
N 170 2370 390 2370 {
lab=#net14}
N 350 2110 350 2180 {
lab=#net16}
N 390 2080 470 2080 {
lab=#net16}
N 510 2110 510 2180 {
lab=VOUTa-}
N 430 2080 430 2130 {
lab=#net16}
N 350 2130 430 2130 {
lab=#net16}
N 350 2050 350 2080 {
lab=VDD}
N 510 2050 510 2080 {
lab=VDD}
N 350 2030 350 2050 {
lab=VDD}
N 350 2030 510 2030 {
lab=VDD}
N 510 2030 510 2050 {
lab=VDD}
N 510 2140 620 2140 {
lab=VOUTa-}
N 690 2200 690 2230 {
lab=GND}
N 250 2210 310 2210 {
lab=VIN}
N 550 2210 610 2210 {
lab=VIN}
N 620 2140 690 2140 {
lab=VOUTa-}
N 420 1210 480 1210 {
lab=#net17}
N 420 1210 420 1320 {
lab=#net17}
N 480 1270 480 1310 {}
C {sky130_fd_pr/corner.sym} -430 -140 0 0 {name=CORNER only_toplevel=true corner=tt}
C {devices/code.sym} -290 -140 0 0 {name=spice only_toplevel=false
format="tcleval( @value )"
value="	
**************************************************************
**************************************************************
**************************************************************
**************************************************************
**************************************************************
*LIBs*********************************************************
**************************************************************
**************************************************************
**************************************************************
**************************************************************
**************************************************************
*.lib $::SKYWATER_MODELS/sky130.lib.spice tt
* chose the corners in the corner file
* tt_mm for mismatch
* ss ff sf fs standart corners
* ll hh lh hl capacitor and resistors corners
* mc for total process variation including corners
**************************************************************
**************************************************************
**************************************************************
**************************************************************
**************************************************************
*Corners/montecarlo options***********************************
**************************************************************
**************************************************************
**************************************************************
**************************************************************
**************************************************************
.TEMP 27
**************************************************************
**************************************************************
**************************************************************
**************************************************************  
*SIMULATION and Plots*****************************************
**************************************************************
**************************************************************
**************************************************************
**************************************************************
.control
save all
ac dec 20 1 50G
plot db(v(VOUT)) 
plot (180*ph(v(VOUT))/pi) 
plot (db(v(VOUT))-db(v(VOUTC)))
plot (db(v(VOUT))-db(v(VOUTa+)))
plot (db(v(VOUT))-db(v(VOUTa-)))
.endc
"}
C {devices/lab_pin.sym} -340 110 0 0 {name=p6 sig_type=std_logic lab=VDD}
C {devices/vsource.sym} -340 170 0 0 {name=V1 value=1.8

}
C {devices/gnd.sym} -340 220 0 0 {name=l3 lab=GND}
C {devices/gnd.sym} 10 440 0 0 {name=l1 lab=GND}
C {devices/gnd.sym} 420 440 0 0 {name=l2 lab=GND}
C {devices/isource.sym} 10 170 0 0 {name=I0 value=5u}
C {devices/lab_pin.sym} 10 110 0 0 {name=p1 sig_type=std_logic lab=VDD}
C {sky130_fd_pr/nfet_01v8_nf.sym} 400 380 0 0 {name=M2
L=6
W=0.9  
nf=2 mult=10
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 30 380 0 1 {name=M1
L=6
W=0.9  
nf=2 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 520 220 0 1 {name=M3
L=0.8
W=10
nf=6 mult=1
model=nfet_01v8
spiceprefix=X
}
C {devices/gnd.sym} 420 220 0 0 {name=l4 lab=GND}
C {sky130_fd_pr/pfet_01v8_nf.sym} 360 90 0 1 {name=M6
L=1.2
W=6
nf=8 mult=1
model=pfet_01v8
spiceprefix=X
}
C {devices/lab_pin.sym} 420 40 1 0 {name=p2 sig_type=std_logic lab=VDD}
C {devices/capa.sym} 680 180 0 0 {name=C1
m=1
value=100f
footprint=1206
device="ceramic capacitor"}
C {devices/gnd.sym} 680 240 0 0 {name=l5 lab=GND}
C {devices/lab_pin.sym} 670 150 1 0 {name=p3 sig_type=std_logic lab=VOUT}
C {devices/lab_pin.sym} 240 220 1 0 {name=p4 sig_type=std_logic lab=VIN+}
C {devices/lab_pin.sym} 600 220 1 0 {name=p5 sig_type=std_logic lab=VIN-}
C {sky130_fd_pr/nfet_01v8_nf.sym} 320 220 0 0 {name=M4
L=0.8
W=10
nf=6 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_nf.sym} 480 90 0 0 {name=M5
L=1.2
W=6
nf=8 mult=1
model=pfet_01v8
spiceprefix=X
}
C {devices/vsource.sym} -280 570 0 0 {name=V2 value=0.9}
C {devices/gnd.sym} -280 640 0 0 {name=l6 lab=GND}
C {devices/lab_pin.sym} -280 410 0 0 {name=p8 sig_type=std_logic lab=VIN+
}
C {devices/vsource.sym} -280 470 0 0 {name=V4 value="ac 0.5"}
C {devices/vsource.sym} -470 470 0 0 {name=V3 value="ac -0.5"}
C {devices/lab_pin.sym} -470 410 0 0 {name=p7 sig_type=std_logic lab=VIN-
}
C {devices/gnd.sym} 0 1080 0 0 {name=l7 lab=GND}
C {devices/gnd.sym} 410 1080 0 0 {name=l8 lab=GND}
C {devices/isource.sym} 0 810 0 0 {name=I1 value=5u}
C {devices/lab_pin.sym} 0 750 0 0 {name=p9 sig_type=std_logic lab=VDD}
C {sky130_fd_pr/nfet_01v8_nf.sym} 390 1020 0 0 {name=M7
L=6
W=0.9  
nf=2 mult=10
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 20 1020 0 1 {name=M8
L=6
W=0.9  
nf=2 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 510 860 0 1 {name=M9
L=0.8
W=10
nf=6 mult=1
model=nfet_01v8
spiceprefix=X
}
C {devices/gnd.sym} 410 860 0 0 {name=l9 lab=GND}
C {sky130_fd_pr/pfet_01v8_nf.sym} 350 730 0 1 {name=M10
L=1.2
W=6
nf=8 mult=1
model=pfet_01v8
spiceprefix=X
}
C {devices/lab_pin.sym} 410 680 1 0 {name=p10 sig_type=std_logic lab=VDD}
C {devices/capa.sym} 670 820 0 0 {name=C2
m=1
value=100f
footprint=1206
device="ceramic capacitor"}
C {devices/gnd.sym} 670 880 0 0 {name=l10 lab=GND}
C {devices/lab_pin.sym} 660 790 1 0 {name=p11 sig_type=std_logic lab=VOUTC}
C {devices/lab_pin.sym} 230 860 1 0 {name=p12 sig_type=std_logic lab=VINC}
C {devices/lab_pin.sym} 590 860 1 0 {name=p13 sig_type=std_logic lab=VINC}
C {sky130_fd_pr/nfet_01v8_nf.sym} 310 860 0 0 {name=M11
L=0.8
W=10
nf=6 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_nf.sym} 470 730 0 0 {name=M12
L=1.2
W=6
nf=8 mult=1
model=pfet_01v8
spiceprefix=X
}
C {devices/vsource.sym} -440 860 0 0 {name=V5 value=0.9}
C {devices/gnd.sym} -440 930 0 0 {name=l11 lab=GND}
C {devices/vsource.sym} -440 760 0 0 {name=V6 value="ac 1"}
C {devices/lab_pin.sym} -440 690 0 0 {name=p14 sig_type=std_logic lab=VINC
}
C {devices/gnd.sym} 10 1780 0 0 {name=l12 lab=GND}
C {devices/gnd.sym} 420 1780 0 0 {name=l13 lab=GND}
C {devices/isource.sym} 10 1510 0 0 {name=I2 value=5u}
C {devices/lab_pin.sym} 10 1450 0 0 {name=p15 sig_type=std_logic lab=VDD}
C {sky130_fd_pr/nfet_01v8_nf.sym} 400 1720 0 0 {name=M13
L=6
W=0.9  
nf=2 mult=10
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 30 1720 0 1 {name=M14
L=6
W=0.9  
nf=2 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 520 1560 0 1 {name=M15
L=0.8
W=10
nf=6 mult=1
model=nfet_01v8
spiceprefix=X
}
C {devices/gnd.sym} 420 1560 0 0 {name=l14 lab=GND}
C {sky130_fd_pr/pfet_01v8_nf.sym} 360 1430 0 1 {name=M16
L=1.2
W=6
nf=8 mult=1
model=pfet_01v8
spiceprefix=X
}
C {devices/capa.sym} 680 1520 0 0 {name=C3
m=1
value=100f
footprint=1206
device="ceramic capacitor"}
C {devices/gnd.sym} 680 1580 0 0 {name=l15 lab=GND}
C {devices/lab_pin.sym} 670 1490 1 0 {name=p17 sig_type=std_logic lab=VOUTa+}
C {devices/lab_pin.sym} 240 1560 1 0 {name=p18 sig_type=std_logic lab=VIN}
C {devices/lab_pin.sym} 600 1560 1 0 {name=p19 sig_type=std_logic lab=VIN}
C {sky130_fd_pr/nfet_01v8_nf.sym} 320 1560 0 0 {name=M17
L=0.8
W=10
nf=6 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_nf.sym} 480 1430 0 0 {name=M18
L=1.2
W=6
nf=8 mult=1
model=pfet_01v8
spiceprefix=X
}
C {devices/vsource.sym} 420 1350 2 0 {name=V7 value="ac 1"}
C {devices/vsource.sym} -240 1560 0 0 {name=V8 value=0.9}
C {devices/gnd.sym} -240 1630 0 0 {name=l16 lab=GND}
C {devices/lab_pin.sym} -240 1490 0 0 {name=p20 sig_type=std_logic lab=VIN
}
C {devices/gnd.sym} 20 2430 0 0 {name=l17 lab=GND}
C {devices/isource.sym} 20 2160 0 0 {name=I3 value=5u}
C {devices/lab_pin.sym} 20 2100 0 0 {name=p21 sig_type=std_logic lab=VDD}
C {sky130_fd_pr/nfet_01v8_nf.sym} 410 2370 0 0 {name=M19
L=6
W=0.9  
nf=2 mult=10
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 40 2370 0 1 {name=M20
L=6
W=0.9  
nf=2 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_nf.sym} 530 2210 0 1 {name=M21
L=0.8
W=10
nf=6 mult=1
model=nfet_01v8
spiceprefix=X
}
C {devices/gnd.sym} 430 2210 0 0 {name=l19 lab=GND}
C {sky130_fd_pr/pfet_01v8_nf.sym} 370 2080 0 1 {name=M22
L=1.2
W=6
nf=8 mult=1
model=pfet_01v8
spiceprefix=X
}
C {devices/lab_pin.sym} 430 2030 1 0 {name=p22 sig_type=std_logic lab=VDD}
C {devices/capa.sym} 690 2170 0 0 {name=C4
m=1
value=100f
footprint=1206
device="ceramic capacitor"}
C {devices/gnd.sym} 690 2230 0 0 {name=l20 lab=GND}
C {devices/lab_pin.sym} 680 2140 1 0 {name=p23 sig_type=std_logic lab=VOUTa-}
C {devices/lab_pin.sym} 250 2210 1 0 {name=p24 sig_type=std_logic lab=VIN}
C {devices/lab_pin.sym} 610 2210 1 0 {name=p25 sig_type=std_logic lab=VIN}
C {sky130_fd_pr/nfet_01v8_nf.sym} 330 2210 0 0 {name=M23
L=0.8
W=10
nf=6 mult=1
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_nf.sym} 490 2080 0 0 {name=M24
L=1.2
W=6
nf=8 mult=1
model=pfet_01v8
spiceprefix=X
}
C {devices/vsource.sym} 430 2460 0 0 {name=V9 value="ac 1"}
C {devices/gnd.sym} 430 2490 0 0 {name=l18 lab=GND}
C {devices/vsource.sym} 480 1240 0 0 {name=V10 value=1.8

}
C {devices/gnd.sym} 480 1310 0 0 {name=l21 lab=GND}
